!function(){"use strict";function e(){document.querySelector(".container").remove(),document.querySelector(".settings").remove(),document.querySelector(".message-win").remove(),document.querySelector(".message-lose").remove(),document.querySelector(".list-container").remove()}function t(e){const t=new Audio;t.src="/src/sounce/win.mp3",t.volume=!1===e?0:1,t.play()}function a(s,n,l){const r=s*n;let c,o=l,i=0,d=0,m=!0,u=[],g=!1,v=0;var S;JSON.parse(null!==localStorage.getItem("arrLastResult"))&&(u.push(JSON.parse(localStorage.getItem("arrLastResult"))),u=u.flat(1)),11===(S=u).length&&(localStorage.removeItem("arrLastResult"),S.shift()),function(e){const t=document.querySelector("body"),a=document.createElement("div");a.className="settings",t.append(a);const n=document.createElement("div");n.className="list-container",n.classList.add("hidden"),t.append(n);const r=document.createElement("div");r.classList="close-last-results",n.append(r);const c=document.createElement("ol");n.append(c);for(let e=1;e<11;e+=1){const t=document.createElement("li");t.className=`result-${e}`,c.append(t)}const o=document.createElement("div");o.className="message-win",o.classList.add("hidden"),t.append(o);const i=document.createElement("p");i.className="text-win",o.append(i);const d=document.createElement("div");d.className="btn-win",d.innerHTML="OK",o.append(d);const m=document.createElement("div");m.className="message-lose",m.classList.add("hidden"),t.append(m);const u=document.createElement("p");u.className="message-lose-text",u.innerHTML="Игра окончена. Попробуйте еще раз",m.append(u);const g=document.createElement("div");g.className="message-lose-wrapper",m.append(g);const v=document.createElement("div");v.className="message-lose-ok",v.innerHTML="OK",g.append(v);const S=document.createElement("div");S.className="message-lose-cancel",S.innerHTML="Отмена",g.append(S);const p=document.createElement("div");p.className="icon-settings",a.append(p);const L=document.createElement("div");L.className="settingsContainer",L.innerHTML=`<div class="close-settings"></div><div class="themes-container">Цветовая тема\n<form class="themes-wrapper">\n<label>\n<span class="themes-text"><input name="themes" type="radio" value="light">Светлая</span>\n</label>\n<label>\n<span class="themes-text"><input name="themes" type="radio" value="dark">Темная</span>\n</label>\n</form>\n</div>\n<div class="level-container">Уровень игры\n<form class="level-wrapper">\n<label>\n<span class="level-text"><input name="level" type="radio" value="easy">Легкий</span>\n</label>\n<label>\n<span class="level-text"><input name="level" type="radio" value="medium">Средний</span>\n</label>\n<label>\n<span class="level-text"><input name="level" type="radio" value="heavy">Тяжелый</span>\n</label>\n</form>\n</div>\n<form class="input-wrapper">Количество мин\n<input class="input-mines" type="number" name="input-mine" min="10" max="99" value=${l}>\n</form>\n<div class="volume-container">Вкл/Выкл звук\n<form class="volume-wrapper">\n<label>\n<span class="volume-text"><input name="volume" type="radio" value="on">Вкл</span>\n</label>\n<label>\n<span class="volume-text"><input name="volume" type="radio" value="off">Выкл</span>\n</label>\n</form>\n</div>\n<div class="last-result">Последние 10 результатов</div>`,a.append(L);const f=document.createElement("div");f.className="new-game",f.innerHTML="<p>Новая игра</p>",a.append(f);const h=document.createElement("div");h.className="btn-reset",a.append(h);const y=document.createElement("div");y.className="container",15===s&&y.classList.add("container-medium"),25===s&&y.classList.add("container-heavy"),t.append(y);const I=document.createElement("div");I.className="menu",15===s&&I.classList.add("menu-medium"),25===s&&I.classList.add("menu-heavy"),y.append(I);const b=document.createElement("div");b.className="step",15===s&&b.classList.add("step-medium"),25===s&&b.classList.add("step-heavy"),b.innerHTML=l.toString().padStart(3,"0"),I.append(b);const N=document.createElement("div");N.className="reset",15===s&&N.classList.add("reset-medium"),25===s&&N.classList.add("reset-heavy"),N.innerHTML="000",I.append(N);const E=document.createElement("div");E.className="time",15===s&&E.classList.add("time-medium"),25===s&&E.classList.add("time-heavy"),E.innerHTML="000",I.append(E);const q=document.createElement("div");q.className="game-field",15===s&&q.classList.add("game-field-medium"),25===s&&q.classList.add("game-field-heavy"),y.append(q),q.innerHTML="<button></button>".repeat(e)}(r),function(){for(let e=0;e<u.length;e+=1)document.querySelector(`.result-${e+1}`).innerHTML=`Р-тат: ${u[e][0]}, Время: ${u[e][1]}сек`}();const p=document.querySelector(".game-field"),L=[...p.children];let f=[...Array(r).keys()].sort((()=>Math.random()-.5)).slice(0,l);function h(e,t){return e>=0&&e<n&&t>=0&&t<s}function y(e,t){if(!h(e,t))return!1;const a=e*s+t;return f.includes(a)}function I(e,t){let a=0;for(let s=-1;s<=1;s+=1)for(let n=-1;n<=1;n+=1)y(e+n,t+s)&&(a+=1);return a}function b(){for(let e=0;e<L.length;e+=1)L[e].disabled=!0}function N(){for(let e=0;e<f.length;e+=1){const t=f[e];L[t].classList.add("flag"),document.querySelector(".step").innerHTML=l.toString().padStart(3,"0")}}function E(){document.querySelector(".message-win").classList.remove("hidden"),document.querySelector(".text-win").innerHTML=`Ура! Вы нашли все мины за ${d} секунд и ${i} ходов!`}window.addEventListener("load",(()=>{const e=JSON.parse(localStorage.getItem("numberOfCells")),t=JSON.parse(localStorage.getItem("arrinnerText")),a=JSON.parse(localStorage.getItem("arrDisabled"));g=localStorage.getItem("isOverGame");for(let s=0;s<L.length;s+=1){if(null===e)return;p.children[s].className=`${e[s]}`,p.children[s].innerText=`${t[s]}`,!0===a[s]&&(p.children[s].disabled=!0)}d=+localStorage.getItem("seconds"),document.querySelector(".time").innerHTML=d.toString().padStart(3,"0"),o=+localStorage.getItem("counter"),document.querySelector(".step").innerHTML=o.toString().padStart(3,"0"),i=+localStorage.getItem("click"),document.querySelector(".reset").innerHTML=i.toString().padStart(3,"0"),f=JSON.parse(localStorage.getItem("arrMines")),document.querySelector(".input-mines").value=f.length;const s=localStorage.getItem("changethemes"),n=document.querySelector("body"),l=document.querySelectorAll('input[type=radio][name="themes"]');"dark"===s?(n.classList.add("themes-dark"),l[1].checked=!0):(n.classList.remove("themes-dark"),l[0].checked=!0);const r=document.querySelectorAll('input[type=radio][name="level"]'),c=localStorage.getItem("changeLevel");"medium"===c?r[1].checked=!0:"heavy"===c?r[2].checked=!0:r[0].checked=!0;const u=document.querySelectorAll('input[type=radio][name="volume"]');"off"===localStorage.getItem("changeVolume")?(m=!1,u[1].checked=!0):(m=!0,u[0].checked=!0)}));const q=document.querySelector(".message-lose");function O(e,a){const n=L[e*s+a],r=function(){let e=0;for(let t=0;t<L.length;t+=1)!1===L[t].classList.contains("no-active")&&(e+=1);return e-1}();if(h(e,a)){if(!0===n.classList.contains("flag")){const e=document.querySelector(".step");n.disabled=!0===g,o+=1,e.innerHTML=o.toString().padStart(3,"0")}if(!0!==n.disabled)if(!0===y(e,a))!function(e){const t=new Audio;t.src="/src/sounce/lose.mp3",t.volume=!1===e?0:1,t.play()}(m),n.classList.add("bomb"),function(){for(let e=0;e<f.length;e+=1){const t=f[e];L[t].classList.remove("flag")}}(),function(){for(let e=0;e<f.length;e+=1){const t=f[e];L[t].classList.add("bomb")}}(),b(),n.disabled=!0,u.push(["Проиграш",d]),localStorage.setItem("arrLastResult",JSON.stringify(u)),localStorage.setItem("seconds",d),clearInterval(c),q.classList.remove("hidden");else{if(n.classList.add("no-active"),0===I(e,a))for(let t=-1;t<=1;t+=1)for(let s=-1;s<=1;s+=1)n.classList.remove("flag"),O(e+s,a+t),n.innerHTML="",n.disabled=!0;1===I(e,a)&&(n.classList.remove("flag"),n.classList.add("one"),n.innerHTML=`${I(e,a)}`,r<=l&&(g=!0,N(),clearInterval(c),t(m),b(),u.push(["Выиграш",d]),localStorage.setItem("arrLastResult",JSON.stringify(u)),E(),localStorage.setItem("seconds",d),o=l)),2===I(e,a)&&(n.classList.remove("flag"),n.classList.add("two"),n.innerHTML=`${I(e,a)}`,r<=l&&(g=!0,N(),clearInterval(c),t(m),b(),u.push(["Выиграш",d]),localStorage.setItem("arrLastResult",JSON.stringify(u)),E(),localStorage.setItem("seconds",d),o=l)),3===I(e,a)&&(n.classList.remove("flag"),n.classList.add("three"),n.innerHTML=`${I(e,a)}`,r<=l&&(g=!0,N(),clearInterval(c),t(m),b(),u.push(["Выиграш",d]),localStorage.setItem("arrLastResult",JSON.stringify(u)),E(),localStorage.setItem("seconds",d),o=l)),4===I(e,a)&&(n.classList.remove("flag"),n.classList.add("four"),n.innerHTML=`${I(e,a)}`,r<=l&&(g=!0,N(),clearInterval(c),t(m),b(),u.push(["Выиграш",d]),localStorage.setItem("arrLastResult",JSON.stringify(u)),E(),localStorage.setItem("seconds",d),o=l)),5===I(e,a)&&(n.classList.remove("flag"),n.classList.add("five"),n.innerHTML=`${I(e,a)}`,r<=l&&(g=!0,N(),clearInterval(c),t(m),b(),u.push(["Выиграш",d]),localStorage.setItem("arrLastResult",JSON.stringify(u)),E(),localStorage.setItem("seconds",d),o=l)),6===I(e,a)&&(n.classList.remove("flag"),n.classList.add("six"),n.innerHTML=`${I(e,a)}`,r<=l&&(g=!0,N(),clearInterval(c),t(m),b(),u.push(["Выиграш",d]),localStorage.setItem("arrLastResult",JSON.stringify(u)),E(),localStorage.setItem("seconds",d),o=l)),7===I(e,a)&&(n.classList.remove("flag"),n.classList.add("seven"),n.innerHTML=`${I(e,a)}`,r<=l&&(g=!0,N(),clearInterval(c),t(m),b(),u.push(["Выиграш",d]),localStorage.setItem("arrLastResult",JSON.stringify(u)),E(),localStorage.setItem("seconds",d),o=l)),8===I(e,a)&&(n.classList.remove("flag"),n.classList.add("eight"),n.innerHTML=`${I(e,a)}`,r<=l&&(g=!0,N(),clearInterval(c),t(m),b(),u.push(["Выиграш",d]),localStorage.setItem("arrLastResult",JSON.stringify(u)),E(),localStorage.setItem("seconds",d),o=l)),n.disabled=!0}}}function T(e){if(null!==JSON.parse(localStorage.getItem("arrMines")))for(let t=0;t<f.length;t+=1)e===f[t]&&(f=[...Array(r).keys()].sort((()=>Math.random()-.5)).slice(0,l),T(e))}p.addEventListener("click",(e=>{if("BUTTON"===e.target.tagName){!function(e){const t=new Audio;t.src="/src/sounce/click.mp3",t.volume=!1===e?0:1,t.play()}(m),v+=1,i+=1,document.querySelector(".reset").innerHTML=i.toString().padStart(3,"0");const t=L.indexOf(e.target),a=t%s,n=Math.floor(t/s);v<=1&&(i<=1&&T(t),c=setInterval((()=>{d+=1,document.querySelector(".time").innerText=d.toString().padStart(3,"0")}),1e3)),O(n,a)}})),p.addEventListener("contextmenu",(e=>{const t=L.indexOf(e.target),a=L[t];if(!0===a.classList.contains("no-active"))return;!function(e){const t=new Audio;t.src="/src/sounce/flag.mp3",t.volume=!1===e?0:1,t.play()}(m);const s=document.querySelector(".step");s.innerHTML=o.toString().padStart(3,"0"),a.classList.toggle("flag"),!0===a.classList.contains("flag")?(a.disabled=!0,o-=1,s.innerHTML=o.toString().padStart(3,"0")):(a.disabled=!1,o+=1,s.innerHTML=o.toString().padStart(3,"0"))})),document.querySelector(".new-game").addEventListener("click",(()=>{localStorage.removeItem("numberOfCells"),localStorage.removeItem("arrinnerText"),localStorage.removeItem("arrDisabled"),clearInterval(c),d=0,localStorage.setItem("seconds",d),g=!1,localStorage.setItem("isOverGame",g),e(),a(s,n,l)})),document.querySelector(".btn-reset").addEventListener("click",(()=>{localStorage.removeItem("numberOfCells"),localStorage.removeItem("arrinnerText"),localStorage.removeItem("arrDisabled"),clearInterval(c),d=0,localStorage.setItem("seconds",d),g=!1,localStorage.setItem("isOverGame",g),e(),a(s,n,l)})),document.querySelectorAll('input[type=radio][name="themes"]').forEach((e=>e.addEventListener("change",(()=>{const t=document.querySelector("body");"light"===e.value?(t.classList.remove("themes-dark"),localStorage.setItem("changethemes",e.value)):"dark"===e.value&&(t.classList.add("themes-dark"),localStorage.setItem("changethemes",e.value))})))),document.querySelectorAll('input[type=radio][name="level"]').forEach((t=>t.addEventListener("change",(()=>{"easy"===t.value?(clearInterval(c),d=0,localStorage.setItem("seconds",d),g=!1,localStorage.setItem("isOverGame",g),e(),a(10,10,10),localStorage.setItem("changeLevel",t.value)):"medium"===t.value?(clearInterval(c),d=0,localStorage.setItem("seconds",d),g=!1,localStorage.setItem("isOverGame",g),e(),a(15,15,10),localStorage.setItem("changeLevel",t.value)):"heavy"===t.value&&(clearInterval(c),d=0,localStorage.setItem("seconds",d),g=!1,localStorage.setItem("isOverGame",g),e(),a(25,25,10),localStorage.setItem("changeLevel",t.value))}))));const M=document.querySelector(".input-mines");M.addEventListener("change",(()=>{clearInterval(c),d=0,localStorage.setItem("seconds",d),g=!1,localStorage.setItem("isOverGame",g),e(),M.value>99&&(M.value=99),M.value<10&&(M.value=10),a(s,n,M.value)})),document.querySelector(".btn-win").addEventListener("click",(()=>{document.querySelector(".message-win").classList.add("hidden")})),document.querySelector(".message-lose-ok").addEventListener("click",(()=>{q.classList.add("hidden"),clearInterval(c),d=0,localStorage.setItem("seconds",d),g=!1,localStorage.setItem("isOverGame",g),e(),a(s,n,l)})),document.querySelector(".message-lose-cancel").addEventListener("click",(()=>{q.classList.add("hidden"),clearInterval(c)})),document.querySelectorAll('input[type=radio][name="volume"]').forEach((e=>e.addEventListener("change",(()=>{"off"===e.value?(m=!1,localStorage.setItem("changeVolume",e.value)):(m=!0,localStorage.setItem("changeVolume",e.value))}))));const k=document.querySelector(".icon-settings"),H=document.querySelector(".settingsContainer");k.addEventListener("click",(()=>{H.classList.add("settingsContainer-active")})),document.querySelector(".close-settings").addEventListener("click",(()=>{H.classList.remove("settingsContainer-active")})),document.querySelector(".last-result").addEventListener("click",(()=>{document.querySelector(".list-container").classList.remove("hidden"),H.classList.remove("settingsContainer-active")})),document.querySelector(".close-last-results").addEventListener("click",(()=>{document.querySelector(".list-container").classList.add("hidden")})),window.addEventListener("unload",(()=>{clearInterval(c),localStorage.removeItem("numberOfCells"),localStorage.removeItem("arrinnerText"),localStorage.removeItem("arrDisabled"),localStorage.removeItem("click");const e=[...p.children],t=[],a=[],s=[];for(let n=0;n<e.length;n+=1)t.push(e[n].className),a.push(e[n].innerText),s.push(e[n].hasAttribute("disabled"));localStorage.setItem("arrLastResult",JSON.stringify(u)),localStorage.setItem("isOverGame",g),localStorage.setItem("numberOfCells",JSON.stringify(t)),localStorage.setItem("arrinnerText",JSON.stringify(a)),localStorage.setItem("arrDisabled",JSON.stringify(s)),localStorage.setItem("seconds",d),localStorage.setItem("click",i),localStorage.setItem("counter",o),localStorage.setItem("arrMines",JSON.stringify(f))}))}const s=localStorage.getItem("changeLevel");"medium"===s?a(15,15,15):"heavy"===s?a(25,25,25):a(10,10,10),document.body.oncontextmenu=function(e){return!1}}();